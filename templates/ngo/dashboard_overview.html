{% extends 'ngo/base.html' %}

{% block title %}Dashboard Overview - {{ block.super }}{% endblock %}

{% block page_title %}Dashboard Overview{% endblock %}
{% block page_description %}Summary of your organization's activity on Connect2Give{% endblock %}

{% block ngo_content %}
    <div class="stats-grid">
        <div class="stat-card">
            <h3>Active Camps</h3>
            <p class="stat-number">{{ stats.active_camps|default:"0" }}</p>
        </div>
        <div class="stat-card">
            <h3>Registered Volunteers</h3>
            <p class="stat-number">{{ stats.total_volunteers|default:"0" }}</p>
        </div>
        <div class="stat-card">
            <h3>Deliveries to Verify</h3>
            <p class="stat-number">{{ stats.donations_to_verify|default:"0" }}</p>
        </div>
        <div class="stat-card">
            <h3>Total Donations Received</h3>
            <p class="stat-number">{{ stats.total_donations_received|default:"0" }}</p>
        </div>
    </div>

    <!-- Interactive charts section -->
    <div class="charts-grid">
        <div class="chart-container">
            <h3>Monthly Donations Trend</h3>
            <canvas id="donationsChart" class="chart-canvas"></canvas>
        </div>
        <div class="chart-container">
            <h3>Donation Status Distribution</h3>
            <canvas id="statusChart" class="chart-canvas"></canvas>
        </div>
    </div>

    <div class="recent-activity">
        <h3>Recent Activity</h3>
        <div class="activity-item">
            <div class="activity-icon">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                </svg>
            </div>
            <div class="activity-content">
                <div class="activity-title">New volunteer registered</div>
                <div class="activity-time">2 hours ago</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z"/>
                </svg>
            </div>
            <div class="activity-content">
                <div class="activity-title">Donation camp created</div>
                <div class="activity-time">5 hours ago</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <div class="activity-content">
                <div class="activity-title">Donation delivery verified</div>
                <div class="activity-time">1 day ago</div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <!-- Chart.js initialization for dashboard graphs -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Monthly Donations Trend Chart
            const donationsCtx = document.getElementById('donationsChart').getContext('2d');
            new Chart(donationsCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Donations Received',
                        data: [12, 19, 15, 25, 22, 30],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#e2e8f0' } },
                        x: { grid: { color: '#e2e8f0' } }
                    }
                }
            });

            // Donation Status Distribution Chart
            const statusCtx = document.getElementById('statusChart').getContext('2d');
            new Chart(statusCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Pending', 'Accepted', 'Delivered', 'Verified'],
                    datasets: [{
                        data: [15, 25, 35, 25],
                        backgroundColor: ['#f59e0b', '#3b82f6', '#10b981', '#8b5cf6'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true } }
                    }
                }
            });
        });
    </script>
{% endblock %}